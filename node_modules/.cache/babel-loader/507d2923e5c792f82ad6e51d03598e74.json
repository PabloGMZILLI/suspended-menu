{"ast":null,"code":"import _slicedToArray from \"/home/pablo.zilli/Desktop/studies/suspended-menu/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/pablo.zilli/Desktop/studies/suspended-menu/src/SuspendedMenu.js\";\nimport React, { useRef, useEffect, useState } from \"react\";\nimport \"./styles.css\";\n\nvar normalizePosition = function normalizePosition() {\n  var x = 50;\n  var y = 50;\n  var r = JSON.parse(localStorage.getItem(\"positions\"));\n\n  if (r) {\n    x = r.x;\n    y = r.y;\n  }\n\n  return [x, y];\n};\n\nvar SuspendMenu = function SuspendMenu(props) {\n  var _useState = useState(normalizePosition()),\n      _useState2 = _slicedToArray(_useState, 2),\n      position = _useState2[0],\n      setPosition = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isDragging = _useState4[0],\n      setIsDragging = _useState4[1];\n\n  var refContainer = useRef(null);\n\n  var SuspendMenuContent = function SuspendMenuContent(props) {\n    return React.createElement(\"div\", {\n      className: \"suspended-menu\",\n      style: {\n        left: position[0],\n        top: position[1]\n      },\n      onMouseDown: function onMouseDown() {\n        return setIsDragging(true);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 22\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: \"/main\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 30\n      },\n      __self: this\n    }, props.children));\n  };\n\n  useEffect(function () {\n    refContainer.current = {\n      position: position,\n      isDragging: isDragging\n    };\n  }, [position, isDragging]);\n  normalizePosition();\n  useEffect(function () {\n    function handleMouseMove(e) {\n      var _refContainer$current = refContainer.current,\n          isDragging = _refContainer$current.isDragging,\n          position = _refContainer$current.position;\n\n      if (isDragging) {\n        e.preventDefault();\n        e.stopPropagation();\n        var newX = position[0] + e.movementX;\n        var newY = position[1] + e.movementY;\n        setPosition([newX, newY]);\n        localStorage.setItem(\"positions\", JSON.stringify({\n          x: newX,\n          y: newY\n        }));\n      }\n    }\n\n    function handleMouseUp() {\n      setIsDragging(false);\n    }\n\n    window.addEventListener(\"mousemove\", handleMouseMove);\n    window.addEventListener(\"mouseup\", handleMouseUp);\n    return function () {\n      window.removeEventListener(\"mousemove\", handleMouseMove);\n      window.removeEventListener(\"mouseup\", handleMouseUp);\n    };\n  }, []);\n  return React.createElement(SuspendMenuContent, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, props.children);\n};\n\nexport default SuspendMenu;","map":{"version":3,"sources":["/home/pablo.zilli/Desktop/studies/suspended-menu/src/SuspendedMenu.js"],"names":["React","useRef","useEffect","useState","normalizePosition","x","y","r","JSON","parse","localStorage","getItem","SuspendMenu","props","position","setPosition","isDragging","setIsDragging","refContainer","SuspendMenuContent","left","top","children","current","handleMouseMove","e","preventDefault","stopPropagation","newX","movementX","newY","movementY","setItem","stringify","handleMouseUp","window","addEventListener","removeEventListener"],"mappings":"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","sourcesContent":["import React, { useRef, useEffect, useState } from \"react\";\nimport \"./styles.css\";\n\nconst normalizePosition = () => {\n  let x = 50;\n  let y = 50;\n  let r = JSON.parse(localStorage.getItem(\"positions\"));\n\n  if (r) {\n    x = r.x;\n    y = r.y;\n  }\n\n  return [x, y];\n};\n\nconst SuspendMenu = props => {\n  const [position, setPosition] = useState(normalizePosition());\n  const [isDragging, setIsDragging] = useState(false);\n  const refContainer = useRef(null);\n  const SuspendMenuContent = props => (\n    <div\n      className=\"suspended-menu\"\n      style={{\n        left: position[0],\n        top: position[1]\n      }}\n      onMouseDown={() => setIsDragging(true)}\n    >\n      <a href=\"/main\">{props.children}</a>\n    </div>\n  );\n  useEffect(() => {\n    refContainer.current = { position, isDragging };\n  }, [position, isDragging]);\n\n  normalizePosition();\n\n  useEffect(() => {\n    function handleMouseMove(e) {\n      const { isDragging, position } = refContainer.current;\n      if (isDragging) {\n        e.preventDefault();\n        e.stopPropagation();\n        const newX = position[0] + e.movementX;\n        const newY = position[1] + e.movementY;\n        setPosition([newX, newY]);\n        localStorage.setItem(\"positions\", JSON.stringify({ x: newX, y: newY }));\n      }\n    }\n    function handleMouseUp() {\n      setIsDragging(false);\n    }\n\n    window.addEventListener(\"mousemove\", handleMouseMove);\n    window.addEventListener(\"mouseup\", handleMouseUp);\n    return () => {\n      window.removeEventListener(\"mousemove\", handleMouseMove);\n      window.removeEventListener(\"mouseup\", handleMouseUp);\n    };\n  }, []);\n\n  return <SuspendMenuContent>{props.children}</SuspendMenuContent>;\n};\n\nexport default SuspendMenu;\n"]},"metadata":{},"sourceType":"module"}