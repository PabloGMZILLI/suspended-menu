{"ast":null,"code":"import _slicedToArray from \"/home/pablo.zilli/Desktop/studies/suspended-menu/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/pablo.zilli/Desktop/studies/suspended-menu/src/SuspendedMenu.js\";\nimport React, { useRef, useEffect, useState } from \"react\";\nimport \"./styles.css\";\n\nvar normalizePosition = function normalizePosition() {\n  var x = 50;\n  var y = 50;\n  var r = JSON.parse(localStorage.getItem(\"positions\"));\n\n  if (r) {\n    x = r.x;\n    y = r.y;\n  }\n\n  return [x, y];\n};\n\nvar SuspendMenuContent = function SuspendMenuContent(props) {\n  return React.createElement(\"div\", {\n    className: \"suspended-menu\",\n    style: {\n      left: position[0],\n      top: position[1]\n    },\n    onMouseDown: function onMouseDown() {\n      return setIsDragging(true);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 18\n    },\n    __self: this\n  }, React.createElement(\"a\", {\n    href: \"/main\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26\n    },\n    __self: this\n  }, props.children));\n};\n\nvar SuspendMenu = function SuspendMenu(props) {\n  var _useState = useState(normalizePosition()),\n      _useState2 = _slicedToArray(_useState, 2),\n      position = _useState2[0],\n      setPosition = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isDragging = _useState4[0],\n      setIsDragging = _useState4[1];\n\n  var refContainer = useRef(null);\n  useEffect(function () {\n    refContainer.current = {\n      position: position,\n      isDragging: isDragging\n    };\n  }, [position, isDragging]);\n  normalizePosition();\n  useEffect(function () {\n    function handleMouseMove(e) {\n      var _refContainer$current = refContainer.current,\n          isDragging = _refContainer$current.isDragging,\n          position = _refContainer$current.position;\n\n      if (isDragging) {\n        var newX = position[0] + e.movementX;\n        var newY = position[1] + e.movementY;\n        setPosition([newX, newY]);\n        localStorage.setItem(\"positions\", JSON.stringify({\n          x: newX,\n          y: newY\n        }));\n      }\n    }\n\n    function handleMouseUp() {\n      setIsDragging(false);\n    }\n\n    window.addEventListener(\"mousemove\", handleMouseMove);\n    window.addEventListener(\"mouseup\", handleMouseUp);\n    return function () {\n      window.removeEventListener(\"mousemove\", handleMouseMove);\n      window.removeEventListener(\"mouseup\", handleMouseUp);\n    };\n  }, []);\n  return React.createElement(SuspendMenuContent, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, props.children);\n};\n\nexport default SuspendMenu;","map":{"version":3,"sources":["/home/pablo.zilli/Desktop/studies/suspended-menu/src/SuspendedMenu.js"],"names":["React","useRef","useEffect","useState","normalizePosition","x","y","r","JSON","parse","localStorage","getItem","SuspendMenuContent","props","left","position","top","setIsDragging","children","SuspendMenu","setPosition","isDragging","refContainer","current","handleMouseMove","e","newX","movementX","newY","movementY","setItem","stringify","handleMouseUp","window","addEventListener","removeEventListener"],"mappings":"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","sourcesContent":["import React, { useRef, useEffect, useState } from \"react\";\nimport \"./styles.css\";\n\nconst normalizePosition = () => {\n  let x = 50;\n  let y = 50;\n  let r = JSON.parse(localStorage.getItem(\"positions\"));\n\n  if (r) {\n    x = r.x;\n    y = r.y;\n  }\n\n  return [x, y];\n};\n\nconst SuspendMenuContent = props => (\n  <div\n    className=\"suspended-menu\"\n    style={{\n      left: position[0],\n      top: position[1]\n    }}\n    onMouseDown={() => setIsDragging(true)}\n  >\n    <a href=\"/main\">{props.children}</a>\n  </div>\n);\n\nconst SuspendMenu = props => {\n  const [position, setPosition] = useState(normalizePosition());\n  const [isDragging, setIsDragging] = useState(false);\n  const refContainer = useRef(null);\n\n  useEffect(() => {\n    refContainer.current = { position, isDragging };\n  }, [position, isDragging]);\n\n  normalizePosition();\n\n  useEffect(() => {\n    function handleMouseMove(e) {\n      const { isDragging, position } = refContainer.current;\n      if (isDragging) {\n        const newX = position[0] + e.movementX;\n        const newY = position[1] + e.movementY;\n        setPosition([newX, newY]);\n        localStorage.setItem(\"positions\", JSON.stringify({ x: newX, y: newY }));\n      }\n    }\n    function handleMouseUp() {\n      setIsDragging(false);\n    }\n\n    window.addEventListener(\"mousemove\", handleMouseMove);\n    window.addEventListener(\"mouseup\", handleMouseUp);\n    return () => {\n      window.removeEventListener(\"mousemove\", handleMouseMove);\n      window.removeEventListener(\"mouseup\", handleMouseUp);\n    };\n  }, []);\n\n  return <SuspendMenuContent>{props.children}</SuspendMenuContent>;\n};\n\nexport default SuspendMenu;\n"]},"metadata":{},"sourceType":"module"}