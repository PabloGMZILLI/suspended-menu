{"ast":null,"code":"import _slicedToArray from \"/home/pablo.zilli/Desktop/studies/suspended-menu/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/pablo.zilli/Desktop/studies/suspended-menu/src/SuspendedMenu.js\";\nimport React, { useRef, useEffect, useState } from \"react\";\nimport \"./styles.css\";\n\nvar normalizePosition = function normalizePosition() {\n  var x,\n      y = 0;\n  var r = JSON.parse(localStorage.getItem(\"positions\"));\n\n  if (r) {\n    x = r.x;\n    y = r.y;\n  }\n\n  return [x, y];\n};\n\nexport default function SuspendMenu() {\n  var _useState = useState(normalizePosition()),\n      _useState2 = _slicedToArray(_useState, 2),\n      position = _useState2[0],\n      setPosition = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isDragging = _useState4[0],\n      setIsDragging = _useState4[1];\n\n  var refContainer = useRef(null);\n\n  var SuspendMenuContent = function SuspendMenuContent(props) {\n    return React.createElement(\"div\", {\n      className: \"suspended-menu\",\n      onMouseDown: function onMouseDown() {\n        return setIsDragging(true);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 23\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: \"/main\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 26\n      },\n      __self: this\n    }, props.children));\n  };\n\n  useEffect(function () {\n    refContainer.current = {\n      position: position,\n      isDragging: isDragging\n    };\n  }, [position, isDragging]);\n  normalizePosition();\n  useEffect(function () {\n    function handleMouseMove(e) {\n      var _refContainer$current = refContainer.current,\n          isDragging = _refContainer$current.isDragging,\n          position = _refContainer$current.position;\n\n      if (isDragging) {\n        var newX = position[0] + e.movementX;\n        var newY = position[1] + e.movementY;\n        setPosition([newX, newY]);\n        localStorage.setItem(\"positions\", JSON.stringify({\n          x: newX,\n          y: newY\n        }));\n      }\n    }\n\n    function handleMouseUp() {\n      setIsDragging(false);\n    }\n\n    window.addEventListener(\"mousemove\", handleMouseMove);\n    window.addEventListener(\"mouseup\", handleMouseUp);\n    return function () {\n      window.removeEventListener(\"mousemove\", handleMouseMove);\n      window.removeEventListener(\"mouseup\", handleMouseUp);\n    };\n  }, []);\n  return React.createElement(SuspendMenuContent, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, \" Main \");\n}","map":{"version":3,"sources":["/home/pablo.zilli/Desktop/studies/suspended-menu/src/SuspendedMenu.js"],"names":["React","useRef","useEffect","useState","normalizePosition","x","y","r","JSON","parse","localStorage","getItem","SuspendMenu","position","setPosition","isDragging","setIsDragging","refContainer","SuspendMenuContent","props","children","current","handleMouseMove","e","newX","movementX","newY","movementY","setItem","stringify","handleMouseUp","window","addEventListener","removeEventListener"],"mappings":"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","sourcesContent":["import React, { useRef, useEffect, useState } from \"react\";\nimport \"./styles.css\";\n\nconst normalizePosition = () => {\n  let x,\n    y = 0;\n  let r = JSON.parse(localStorage.getItem(\"positions\"));\n\n  if (r) {\n    x = r.x;\n    y = r.y;\n  }\n\n  return [x, y];\n};\n\nexport default function SuspendMenu() {\n  const [position, setPosition] = useState(normalizePosition());\n  const [isDragging, setIsDragging] = useState(false);\n  const refContainer = useRef(null);\n\n  const SuspendMenuContent = (props) => (\n    <div className=\"suspended-menu\" \n    onMouseDown={() => setIsDragging(true)}\n    >\n      <a href=\"/main\" >{ props.children }</a>\n    </div>\n  );\n\n  useEffect(() => {\n    refContainer.current = { position, isDragging };\n  }, [position, isDragging]);\n\n  normalizePosition();\n\n  useEffect(() => {\n    function handleMouseMove(e) {\n      const { isDragging, position } = refContainer.current;\n      if (isDragging) {\n        const newX = position[0] + e.movementX;\n        const newY = position[1] + e.movementY;\n        setPosition([newX, newY]);\n        localStorage.setItem(\"positions\", JSON.stringify({ x: newX, y: newY }));\n      }\n    }\n\n    function handleMouseUp() {\n      setIsDragging(false);\n    }\n\n    window.addEventListener(\"mousemove\", handleMouseMove);\n    window.addEventListener(\"mouseup\", handleMouseUp);\n    return () => {\n      window.removeEventListener(\"mousemove\", handleMouseMove);\n      window.removeEventListener(\"mouseup\", handleMouseUp);\n    };\n  }, []);\n\n  return <SuspendMenuContent> Main </SuspendMenuContent>\n}\n"]},"metadata":{},"sourceType":"module"}